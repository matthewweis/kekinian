version: 1.0.{build}

image: Visual Studio 2019

init:
  - cmd: git config --global core.autocrlf true
  - cmd: git config --global core.symlinks true

clone_folder: c:\sireum

cache:
  - bin\win\java
  - bin\scala
  - bin\win\z3

install:
  - git submodule update --init --recursive

build_script:
  - call "C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvars64.bat"
  - bin\build.cmd jitpack native
  - bin\win\upx.exe -9 bin\win\sireum.exe
